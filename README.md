## Модуль интеграции с CMS Tilda
Данный модуль обеспечивает взаимодействие между интернет-магазином на базе CMS Tilda и сервисом платежей [ХуткiГрош](https://hutkigrosh.by)
Выполнен как отдельный компонент, с которым Tilda взаимодействует через механизм [универсальной платёжной системы](https://help-ru.tilda.cc/payments/custom-payment-gateway)
и располагается на стороне разработчика сервиса ХуткiГрош
  
## Инструкция по настройке платежной системы в интернет-магазине
1. Перейдите в `настройки сайта → Платежные системы` и выберите пункт `«Универсальная платёжная система»`
1. Из списка готовых шаблонов выберите `ХуткiГрош (ЕРИП Беларусь)`
1. Укажите обязательные параметры
    * Логин*  – логин в системе ХуткiГрош
    * Пароль* – пароль в системе ХуткiГрош
    * Секрет для подписи заказа* - комбинация символов для дополнительной верификации между системами
    * URL страницы успеха - адрес страницы, на которую будет перенаправлен пользователь в случае успешной оплаты
    * URL страницы отказа - адрес страницы, на которую будет перенаправлен пользователь, если в процессе оплаты возникнут ошибки.
    * ЕРИП ID*  – уникальный идентификатор ЕРИП услуги
    * Код услуги* - код услуги в дереве ЕРИП. Используется при генерации QR-кода
    * Sandbox - режим "песочницы". Если включен (1), то все счета буду выставляться в тестовой системе trial.hgrosh.by. 1 - включен, 0 - выключен. Внимание, для реального и тестового режимов используются разные логин/пароль
    * Sms оповещение - включить информирование клиента по смс при успешном выставлении счета (выполняется шлюзом Хуткiгрош)
    * Email оповещение - включить информирование клиента по email при успешном выставлении счета (выполняется шлюзом Хуткiгрош)
    * Секция "Инструкция" - если включена (1), то на итоговом экране клиенту будет доступна пошаговая инструкция по оплате счета в ЕРИП. 1 - включена, 0 - выключена
    * Секция "QR-code" - если включена (1), то на итоговом экране клиенту будет доступна оплата счета по QR-коду. 1 - включена, 0 - выключена
    * Секция "Webpay" - если включена (1), то на итоговом экране клиенту отобразится кнопка для оплаты счета картой (переход на Webpay). 1 - включена, 0 - выключена        
    * Срок действия счета - как долго счет, будет доступен в ЕРИП для оплаты
    * Путь в дереве ЕРИП - путь для оплаты счета в дереве ЕРИП, который будет показан клиенту после оформления заказа (например, Платежи > Магазин > Заказы)

\* поля передаются службой поддержки сервиса ХуткiГрош при регистрации (заключении договора)

### Тестовые данные
Для настрой оплаты в тестовом режиме:
 * воспользуйтесь данными для подключения к тестовой системе, полученными при регистрации в ХуткiГрош
 * включите в настройках модуля тестовый режим (Sandbox)
 * для эмуляции оплаты клиентом выставленного счета воспльзуйтесь личным кабинетом [тестовой системы](https://trial.hgrosh.by) (меню _Тест оплаты ЕРИП_)



